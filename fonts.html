
<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>字体产品 - 自在造字</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="styles.css">
    <script>
      tailwind.config = {
        darkMode: 'class',
        theme: {
          extend: {
            fontFamily: { sans: ['Inter', 'sans-serif'] },
          },
        },
      }
    </script>
</head>
<body class="bg-white text-gray-900 dark:bg-neutral-950 dark:text-gray-100 flex flex-col min-h-screen">
    <nav id="nav-placeholder" class="fixed inset-x-0 top-0 z-50 border-b border-gray-100 bg-white/90 backdrop-blur-md dark:border-neutral-900 dark:bg-neutral-950/90"></nav>

    <main class="animate-fade-in mx-auto max-w-[1800px] px-6 pt-32 lg:px-12 pb-20 flex-1 w-full">
        <div class="flex flex-col gap-12 lg:flex-row lg:items-start">
            
            <!-- Sidebar -->
            <aside class="w-full lg:w-72 lg:shrink-0 space-y-10 lg:sticky lg:top-32 h-fit">
                <!-- Search -->
                <div>
                    <h3 class="mb-4 text-xs font-bold uppercase tracking-widest text-gray-500">搜索</h3>
                    <input id="search-input" type="text" placeholder="查找字体..." class="w-full rounded-xl border border-gray-200 bg-gray-50 px-4 py-3 text-sm outline-none focus:border-black dark:border-neutral-800 dark:bg-neutral-900 dark:text-white dark:focus:border-white transition-colors" />
                </div>

                <!-- Category -->
                <div>
                    <h3 class="mb-4 text-xs font-bold uppercase tracking-widest text-gray-500">分类</h3>
                    <ul class="space-y-1">
                        <li><button class="cat-btn block w-full rounded-lg px-4 py-2 text-left text-sm font-medium bg-black text-white dark:bg-white dark:text-black transition-colors shadow-md" data-category="全部">全部</button></li>
                        <li><button class="cat-btn block w-full rounded-lg px-4 py-2 text-left text-sm font-medium text-gray-600 hover:bg-gray-100 dark:text-neutral-400 dark:hover:bg-neutral-900 transition-colors" data-category="黑体">黑体</button></li>
                    </ul>
                </div>

                <!-- Tags -->
                <div>
                    <h3 class="mb-4 text-xs font-bold uppercase tracking-widest text-gray-500">风格</h3>
                    <div class="flex flex-wrap gap-2">
                        <button class="tag-btn rounded-full border border-gray-200 bg-white px-3 py-1.5 text-xs font-medium text-gray-600 dark:border-neutral-800 dark:bg-neutral-950 dark:text-neutral-400 transition-colors hover:border-gray-400" data-tag="免费商用">免费商用</button>
                        <button class="tag-btn rounded-full border border-gray-200 bg-white px-3 py-1.5 text-xs font-medium text-gray-600 dark:border-neutral-800 dark:bg-neutral-950 dark:text-neutral-400 transition-colors hover:border-gray-400" data-tag="可变">可变</button>
                    </div>
                </div>
            </aside>

            <!-- Product Grid -->
            <section class="flex-1">
                <div class="mb-6 flex items-center justify-between">
                    <span id="result-count" class="text-sm text-gray-500 dark:text-neutral-500">显示 0 个结果</span>
                </div>
                <div id="products-grid" class="grid grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-3">
                    <!-- JS Auto Fill -->
                </div>
            </section>
        </div>
    </main>

    <footer id="footer-placeholder" class="bg-white pt-20 pb-12 dark:bg-neutral-950 border-t border-gray-100 dark:border-neutral-900 mt-auto"></footer>
    
    <script src="components.js"></script>
    <script src="script.js"></script>

    <script>
        const ALL_PRODUCTS = [
            {
                title: '自在起点黑',
                subtitle: '免费商用 • 双轴可变',
                category: '黑体',
                tags: ['免费商用', '可变'],
                imageUrl: 'https://pic3.fukit.cn/autoupload/NWINCyTOTWqNUcPQazQq69iO_OyvX7mIgxFBfDMDErs/20251127/Btd0/680X600/1-08.jpg/webp', 
                link: 'fonts/qidiansans.html' // Updated to nested folder structure
            }
        ];

        document.addEventListener('DOMContentLoaded', () => {
            const grid = document.getElementById('products-grid');
            const searchInput = document.getElementById('search-input');
            const countLabel = document.getElementById('result-count');
            const categoryBtns = document.querySelectorAll('.cat-btn');
            const tagBtns = document.querySelectorAll('.tag-btn');
            
            let activeCategory = '全部';
            let activeTags = [];
            let searchQuery = '';

            function render() {
                const filtered = ALL_PRODUCTS.filter(p => {
                    const matchSearch = p.title.toLowerCase().includes(searchQuery) || p.subtitle.toLowerCase().includes(searchQuery);
                    const matchCat = activeCategory === '全部' || p.category === activeCategory;
                    const matchTags = activeTags.length === 0 || activeTags.every(t => p.tags.includes(t));
                    return matchSearch && matchCat && matchTags;
                });
                
                countLabel.textContent = `显示 ${filtered.length} 个结果`;
                
                if (filtered.length > 0) {
                    // Note: target="_blank" is now default in script.js createBentoCard
                    grid.innerHTML = filtered.map(item => createBentoCard({
                        ...item, 
                        colSpan: 'col-span-1', 
                        rowSpan: 'row-span-1'
                    })).join('');
                } else {
                    grid.innerHTML = '<div class="col-span-full py-20 text-center text-gray-500">没有找到匹配的字体</div>';
                }
            }

            searchInput.addEventListener('input', (e) => { 
                searchQuery = e.target.value.toLowerCase(); 
                render(); 
            });

            categoryBtns.forEach(btn => btn.addEventListener('click', () => {
                categoryBtns.forEach(b => { 
                    b.classList.remove('bg-black', 'text-white', 'dark:bg-white', 'dark:text-black', 'shadow-md'); 
                    b.classList.add('text-gray-600', 'hover:bg-gray-100'); 
                });
                btn.classList.remove('text-gray-600', 'hover:bg-gray-100'); 
                btn.classList.add('bg-black', 'text-white', 'dark:bg-white', 'dark:text-black', 'shadow-md');
                activeCategory = btn.dataset.category; 
                render();
            }));

            tagBtns.forEach(btn => btn.addEventListener('click', () => {
                const tag = btn.dataset.tag;
                if (activeTags.includes(tag)) {
                    activeTags = activeTags.filter(t => t !== tag);
                    btn.classList.remove('bg-black', 'text-white', 'dark:bg-white', 'dark:text-black', 'border-black', 'dark:border-white'); 
                    btn.classList.add('bg-white', 'text-gray-600', 'border-gray-200');
                } else {
                    activeTags.push(tag);
                    btn.classList.remove('bg-white', 'text-gray-600', 'border-gray-200'); 
                    btn.classList.add('bg-black', 'text-white', 'dark:bg-white', 'dark:text-black', 'border-black', 'dark:border-white');
                }
                render();
            }));

            render();
        });
    </script>
</body>
</html>
